# UI設計書

## 画面一覧

1. ログイン画面
2. ホーム画面（リポジトリ一覧）
3. ファイル一覧画面
4. エディタ画面
5. プッシュダイアログ
6. 設定画面

-----

## 1. ログイン画面

### ワイヤーフレーム

```
┌─────────────────────────────┐
│                             │
│      📝 Novel Writer        │
│                             │
│   GitHub連携物書きツール      │
│                             │
│  ┌───────────────────────┐  │
│  │  🐙 GitHubで           │  │
│  │     ログイン            │  │
│  └───────────────────────┘  │
│                             │
│  ────────  or  ────────     │
│                             │
│  Personal Access Token      │
│  ┌───────────────────────┐  │
│  │ ghp_xxxxxxxxxxxxx     │  │
│  └───────────────────────┘  │
│  ┌───────────────────────┐  │
│  │     ログイン            │  │
│  └───────────────────────┘  │
│                             │
└─────────────────────────────┘
```

### 機能

- GitHub OAuthログインボタン（推奨）
- Personal Access Token入力（代替手段）
- トークンの検証とエラー表示

### 画面遷移

- ログイン成功 → ホーム画面

-----

## 2. ホーム画面（リポジトリ一覧）

### ワイヤーフレーム

```
┌─────────────────────────────┐
│ ☰  📚 My Novels      👤 ⚙️  │ ← ヘッダー
├─────────────────────────────┤
│ 🔍 検索...                   │
├─────────────────────────────┤
│                             │
│ ┌─────────────────────────┐ │
│ │ 📖 my-fantasy-novel     │ │
│ │ user/my-fantasy-novel   │ │
│ │ 📝 25 files             │ │
│ │ 🕐 2時間前               │ │
│ │ ⚠️  未Push: 3ファイル    │ │
│ └─────────────────────────┘ │
│                             │
│ ┌─────────────────────────┐ │
│ │ 📖 sci-fi-project       │ │
│ │ user/sci-fi-project     │ │
│ │ 📝 12 files             │ │
│ │ 🕐 1日前                 │ │
│ │ ✅ 同期済み              │ │
│ └─────────────────────────┘ │
│                             │
│ ┌─────────────────────────┐ │
│ │ 📖 historical-drama     │ │
│ │ user/historical-drama   │ │
│ │ 📝 8 files              │ │
│ │ 🕐 3日前                 │ │
│ │ ✅ 同期済み              │ │
│ └─────────────────────────┘ │
│                             │
└─────────────────────────────┘
```

### 機能

- リポジトリ一覧表示（カード形式）
- 検索・フィルタ
- 同期状態表示（未Push件数、最終更新時刻）
- タップでファイル一覧画面へ遷移
- ハンバーガーメニュー（ログアウト、設定）

### カードの状態表示

- **同期済み**: ✅ 緑チェック
- **未Push**: ⚠️ 黄色警告 + ファイル数
- **同期エラー**: ❌ 赤エラー

### 画面遷移

- リポジトリ選択 → ファイル一覧画面
- ⚙️アイコン → 設定画面

-----

## 3. ファイル一覧画面

### ワイヤーフレーム

```
┌─────────────────────────────┐
│ ← my-fantasy-novel    🔄 📤 │ ← ヘッダー
├─────────────────────────────┤
│ 🔍 ファイル検索...            │
├─────────────────────────────┤
│                             │
│ 📁 world/                   │ ← フォルダ（折りたたみ可）
│   📄 history.md             │
│   📄 magic-system.md        │
│                             │
│ 📁 characters/              │
│   📄 protagonist.md    ⚠️   │ ← 未Push
│   📄 antagonist.md     ⚠️   │
│                             │
│ 📁 chapters/           ⚠️ 2 │ ← フォルダに未Push件数
│   📄 chapter-01.md     ⚠️   │
│   📄 chapter-02.md          │
│   📄 chapter-03.md     ⚠️   │
│                             │
│ 📁 terms/                   │
│   📄 glossary.md            │
│                             │
│ 📄 README.md                │
│                             │
│ ┌───────────────────────┐   │
│ │  ➕ 新規ファイル       │   │ ← フローティングボタン
│ └───────────────────────┘   │
└─────────────────────────────┘
```

### 機能

- ディレクトリツリー表示
- フォルダの展開・折りたたみ
- ファイル検索
- 未Pushファイルのバッジ表示
- 長押しでコンテキストメニュー（名前変更、削除）
- 新規ファイル作成ボタン

### ヘッダーボタン

- **🔄** : プル（GitHub → ローカル）
- **📤** : プッシュダイアログ表示（未Pushファイルがある場合のみアクティブ）

### 画面遷移

- ファイルタップ → エディタ画面
- 📤ボタン → プッシュダイアログ

-----

## 4. エディタ画面

### ワイヤーフレーム（編集モード）

```
┌─────────────────────────────┐
│ ← chapter-01.md    💾 ⋮     │ ← ヘッダー
├─────────────────────────────┤
│ [編集] [プレビュー]           │ ← タブ切り替え
├─────────────────────────────┤
│  1 # Chapter 1              │
│  2                          │
│  3 The hero awoke in a      │
│  4 strange land...          │
│  5                          │
│  6 ## The Beginning         │
│  7                          │
│  8 It was a cold morning.   │
│  9                          │
│ 10                          │
│ 11                          │
│ 12                          │
│ 13                          │
│ 14                          │
│ 15                          │
│ 16                          │
│ 17                          │
│ 18                          │
└─────────────────────────────┘
```

### ワイヤーフレーム（プレビューモード）

```
┌─────────────────────────────┐
│ ← chapter-01.md    💾 ⋮     │
├─────────────────────────────┤
│ [編集] [プレビュー]           │
├─────────────────────────────┤
│                             │
│  Chapter 1                  │
│  ═══════════                │
│                             │
│  The hero awoke in a        │
│  strange land...            │
│                             │
│  The Beginning              │
│  ───────────                │
│                             │
│  It was a cold morning.     │
│                             │
│                             │
│                             │
│                             │
└─────────────────────────────┘
```

### 機能

- Markdownエディタ（CodeMirror 6）
- シンタックスハイライト
- 行番号表示
- 編集/プレビューのタブ切り替え
- 自動保存（30秒ごと）
- 保存状態表示（💾アイコンがアニメーション）

### ヘッダーボタン

- **←** : ファイル一覧に戻る
- **💾** : 保存状態インジケーター
  - 保存済み: 💾 グレー
  - 保存中: 💾 アニメーション
  - 未保存: 💾 赤
- **⋮** : メニュー（ファイル名変更、削除、エクスポート）

### キーボード対応

- Ctrl/Cmd + S : 手動保存
- Ctrl/Cmd + P : プレビュー切り替え

-----

## 5. プッシュダイアログ

### ワイヤーフレーム

```
┌─────────────────────────────┐
│                             │
│  ┌───────────────────────┐  │
│  │  📤 GitHubにプッシュ   │  │
│  ├───────────────────────┤  │
│  │                       │  │
│  │ 変更ファイル (3)       │  │
│  │                       │  │
│  │ ☑️ characters/        │  │
│  │     protagonist.md    │  │
│  │                       │  │
│  │ ☑️ chapters/          │  │
│  │     chapter-01.md     │  │
│  │     chapter-03.md     │  │
│  │                       │  │
│  │ コミットメッセージ      │  │
│  │ ┌─────────────────┐   │  │
│  │ │ Update chapters │   │  │
│  │ │ and characters  │   │  │
│  │ └─────────────────┘   │  │
│  │                       │  │
│  │ ┌─────────────────┐   │  │
│  │ │   キャンセル     │   │  │
│  │ └─────────────────┘   │  │
│  │ ┌─────────────────┐   │  │
│  │ │   プッシュ       │   │  │
│  │ └─────────────────┘   │  │
│  └───────────────────────┘  │
│                             │
└─────────────────────────────┘
```

### 機能

- 変更ファイル一覧（チェックボックスで選択可能）
- コミットメッセージ入力（必須）
- プッシュ実行
- 進行状況表示
- 成功/失敗の通知

### プッシュ中の表示

```
┌─────────────────────────────┐
│  📤 プッシュ中...            │
│                             │
│  ━━━━━━━━━━━━━━━━━━━━━━    │
│  2 / 3 ファイル完了          │
│                             │
│  ✅ protagonist.md          │
│  ✅ chapter-01.md           │
│  ⏳ chapter-03.md           │
└─────────────────────────────┘
```

-----

## 6. 設定画面

### ワイヤーフレーム

```
┌─────────────────────────────┐
│ ← 設定                       │
├─────────────────────────────┤
│                             │
│ アカウント                   │
│ ┌───────────────────────┐   │
│ │ 👤 username           │   │
│ │ 🔗 github.com         │   │
│ └───────────────────────┘   │
│ [ログアウト]                 │
│                             │
│ 編集設定                     │
│ ┌───────────────────────┐   │
│ │ フォントサイズ         │   │
│ │ ◄─────●─────►  16px  │   │
│ └───────────────────────┘   │
│ ┌───────────────────────┐   │
│ │ 自動保存              │   │
│ │                  [ON]│   │
│ └───────────────────────┘   │
│                             │
│ 同期設定                     │
│ ┌───────────────────────┐   │
│ │ プッシュ前に確認       │   │
│ │                  [ON]│   │
│ └───────────────────────┘   │
│                             │
│ ストレージ                   │
│ ┌───────────────────────┐   │
│ │ ローカルデータ         │   │
│ │ 使用量: 12.5 MB       │   │
│ │ [キャッシュをクリア]   │   │
│ └───────────────────────┘   │
│                             │
│ アプリ情報                   │
│ バージョン: 1.0.0            │
│                             │
└─────────────────────────────┘
```

### 機能

- アカウント情報表示
- ログアウト
- エディタ設定（フォントサイズ、自動保存）
- 同期設定
- ローカルデータ管理
- アプリバージョン表示

-----

## デザインシステム

### カラーパレット

#### ライトモード

```
背景: #FFFFFF
テキスト: #1F2937 (gray-800)
セカンダリテキスト: #6B7280 (gray-500)

プライマリ: #3B82F6 (blue-500)
成功: #10B981 (green-500)
警告: #F59E0B (amber-500)
エラー: #EF4444 (red-500)

ボーダー: #E5E7EB (gray-200)
```

#### ダークモード（将来実装）

```
背景: #1F2937 (gray-800)
テキスト: #F9FAFB (gray-50)
セカンダリテキスト: #9CA3AF (gray-400)

プライマリ: #60A5FA (blue-400)
成功: #34D399 (green-400)
警告: #FBBF24 (amber-400)
エラー: #F87171 (red-400)

ボーダー: #374151 (gray-700)
```

### タイポグラフィ

```
見出し1: 24px / 32px (font-bold)
見出し2: 20px / 28px (font-semibold)
見出し3: 18px / 24px (font-semibold)
本文: 16px / 24px (font-normal)
小文字: 14px / 20px (font-normal)
キャプション: 12px / 16px (font-normal)
```

### スペーシング

```
xs: 4px
sm: 8px
md: 16px
lg: 24px
xl: 32px
2xl: 48px
```

### ボーダー半径

```
小: 4px (ボタン、入力フィールド)
中: 8px (カード)
大: 16px (モーダル)
```

-----

## インタラクション

### タップ領域

- 最小タップ領域: 44×44px（iOS推奨）
- ボタン間の余白: 8px以上

### アニメーション

- ページ遷移: 300ms ease-in-out
- モーダル表示: 200ms ease-out
- ホバー効果: 150ms ease
- 保存アニメーション: パルス効果

### フィードバック

- タップ時: スケール 0.95（100ms）
- 長押し: バイブレーション + コンテキストメニュー
- スワイプ: 左スワイプで削除（ファイル一覧）

-----

## レスポンシブ対応

### iPhone（縦）: 375px - 428px

- 1カラムレイアウト
- フルスクリーンエディタ
- ボトムナビゲーション（将来）

### iPhone（横）: 667px - 932px

- 2カラムレイアウト（ファイル一覧 + エディタ）
- スプリットビュー

### iPad: 768px以上

- 3カラムレイアウト（リポジトリ一覧 + ファイル一覧 + エディタ）
- フローティングツールバー

-----

## アクセシビリティ

### 基本要件

- テキストコントラスト: WCAG AA準拠（4.5:1以上）
- タッチターゲット: 44×44px以上
- フォーカスインジケーター: 2px blue outline

### スクリーンリーダー対応

- 適切なARIAラベル
- セマンティックHTML
- キーボードナビゲーション

-----

## エラー状態の表示

### ネットワークエラー

```
┌─────────────────────────────┐
│  ⚠️ ネットワークエラー        │
│                             │
│  GitHubに接続できません      │
│                             │
│  [再試行]  [オフラインで続行] │
└─────────────────────────────┘
```

### プッシュ失敗

```
┌─────────────────────────────┐
│  ❌ プッシュ失敗              │
│                             │
│  コンフリクトが発生しました   │
│  最新の変更をプルしてください │
│                             │
│  [プルして再試行]  [閉じる]   │
└─────────────────────────────┘
```

### 認証エラー

```
┌─────────────────────────────┐
│  🔒 認証エラー               │
│                             │
│  トークンの有効期限が切れました│
│                             │
│  [再ログイン]                │
└─────────────────────────────┘
```

-----

## 通知・トースト

### 成功

```
┌───────────────────┐
│ ✅ プッシュ完了   │
└───────────────────┘
3秒後に自動で消える
```

### 情報

```
┌───────────────────┐
│ ℹ️ 自動保存しました│
└───────────────────┘
2秒後に自動で消える
```

### 警告

```
┌─────────────────────┐
│ ⚠️ 未保存の変更があります│
└─────────────────────┘
ユーザーアクションまで表示
```
