# UI/UX改善: フォント選択、縦書きプレビュー、可読性向上

## 概要
エディタの可読性と視認性を向上させ、より快適な文章編集体験を提供するためのUI/UX改善

## 改善項目

### 1. フォント選択機能
- [ ] エディタとプレビューでフォントを選択できるようにする
- [ ] 無料のWebフォントを提供する
  - **明朝体**
    - Noto Serif JP (Google Fonts)
    - Shippori Mincho (Google Fonts)
    - UD Digi Kyokasho (Google Fonts)
    - Zen Old Mincho (Google Fonts)
  - **ゴシック体**
    - Noto Sans JP (Google Fonts)
    - M PLUS Rounded 1c (Google Fonts)
    - Zen Kaku Gothic New (Google Fonts)
    - BIZ UDGothic (Google Fonts)
- [ ] フォント設定を保存できるようにする（localStorage等）
- [ ] フォントサイズも調整できるとなお良い（14px〜24px程度）
- [ ] 行間（line-height）も調整可能にする

### 2. 縦書きプレビュー機能
- [ ] プレビューモードで縦書き表示を選択できるようにする
- [ ] CSS の `writing-mode: vertical-rl` を使用
- [ ] 縦書き時の適切なスタイリング
  - 句読点の位置調整
  - 英数字の回転処理
  - ルビ（ふりがな）の適切な表示
- [ ] 横書き・縦書きの切り替えボタンをツールバーに追加
- [ ] 縦書き時のページ送り方向（右から左）の考慮

### 3. 可読性・視認性の向上
- [ ] 文章編集に最適な行間・余白の調整
  - 適切な行間（1.6〜2.0程度）
  - 段落間の余白
- [ ] 長文でも読みやすい1行の最大文字数の設定
  - プレビュー時: 45〜65文字程度（日本語の場合）
  - エディタ時: ソフトラップの設定
- [ ] エディタ部分のコントラスト改善
  - 背景色の選択肢（白、オフホワイト、クリーム色など）
  - テキスト色の調整
- [ ] フォーカスモード（サイドバーを隠して執筆に集中できるモード）の追加を検討
  - F11やショートカットキーで切り替え
  - ツールバーも最小化
- [ ] ダークモード対応を検討
  - 夜間の執筆に優しい配色
  - 目の疲労軽減

### 4. その他の編集体験向上
- [ ] 原稿用紙風の表示モード（オプション）
- [ ] 文字数カウントの改善
  - 段落ごとの文字数
  - 選択範囲の文字数
  - 原稿用紙換算枚数
- [ ] ルーラー表示（オプション）

## 実装の方針

### アーキテクチャ
- 現在のベースUIは維持しつつ、設定パネルやツールバーに機能を追加
- ユーザー設定は localStorage に保存して永続化
- レスポンシブ対応を維持
- Zustand で設定状態を管理

### UI設計
```
┌─────────────────────────────────────────────┐
│ ヘッダー                                       │
├─────────┬───────────────────────────────────┤
│         │ [編集] [プレビュー] [⚙設定]           │
│ ファイル  │ ┌─────────────────────────────┐   │
│ ツリー   │ │                             │   │
│         │ │  エディタ / プレビュー         │   │
│         │ │                             │   │
│         │ └─────────────────────────────┘   │
└─────────┴───────────────────────────────────┘

設定パネル（ドロップダウンまたはモーダル）:
- フォント選択（明朝体/ゴシック体）
- フォントサイズ
- 行間
- 表示モード（横書き/縦書き）
- 背景色
- フォーカスモード
```

### 技術スタック
- Google Fonts API でWebフォントを読み込み
- CodeMirror のテーマカスタマイズ
- CSS Variables でテーマ切り替え
- localStorage でユーザー設定を永続化

## 参考資料
- 現在のエディタ実装: `src/components/editor/MarkdownEditor.tsx`
- エディタページ: `src/pages/EditorPage.tsx`
- 使用しているエディタライブラリ: @uiw/react-codemirror
- プレビュー: marked + Tailwind Typography

### 参考になるエディタ
- Scrivener（執筆専用エディタ）
- iA Writer（ミニマルなマークダウンエディタ）
- Ulysses（縦書き対応エディタ）
- Notion（フォント選択機能）

## 優先度
**High** - 文章エディタとしての基本的な使いやすさに直結する機能

## 実装ステップ（提案）
1. **Phase 1**: フォント選択機能の実装
   - 設定パネルの追加
   - Google Fonts の統合
   - localStorage への保存

2. **Phase 2**: 可読性向上の基本設定
   - フォントサイズ・行間調整
   - 最大幅の設定
   - 背景色の選択

3. **Phase 3**: 縦書きプレビュー機能
   - 縦書きCSS の実装
   - 切り替えUI の追加
   - 縦書き時のスタイル調整

4. **Phase 4**: 高度な機能
   - フォーカスモード
   - ダークモード
   - 原稿用紙モード

## 期待される効果
- 長時間の執筆作業でも疲れにくい
- 小説や論文など、さまざまな文章タイプに対応
- 日本語の文章編集に特化した使いやすさ
- ユーザーの好みに合わせたカスタマイズ性
